<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>InglÃªs na Sua MÃ£o | Plataforma</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body{font-family:Arial;background:#f4f4f4;margin:0}
header{background:#0a3cff;color:#fff;padding:20px;text-align:center}
.container{max-width:900px;margin:auto;padding:20px}
.box{background:#fff;padding:20px;border-radius:8px;margin-bottom:20px}
input,button,select{width:100%;padding:10px;margin:6px 0}
button{background:#0a3cff;color:#fff;border:none;border-radius:5px}
.hidden{display:none}
.plan{border:1px solid #ddd;padding:15px;margin:10px 0;border-radius:5px}
.lock{opacity:0.4}
.pay{background:#00a650}
.logout{background:#777}
</style>
</head>

<body>

<header>
  <h1>InglÃªs na Sua MÃ£o</h1>
  <p>Ãrea do Aluno â€¢ Pagamento Seguro</p>
</header>

<div class="container">

<!-- LOGIN -->
<div class="box" id="loginBox">
  <h2>Login / Cadastro</h2>
  <input id="email" placeholder="Email">
  <input id="senha" type="password" placeholder="Senha">
  <button onclick="login()">Entrar</button>
  <button onclick="registrar()">Criar Conta</button>
</div>

<!-- ESCOLHA DE PLANO -->
<div class="box hidden" id="pagamentoBox">
  <h2>Escolha seu Plano</h2>

  <div class="plan">
    ğŸ“˜ BÃ¡sico â€“ R$49,90  
    <button class="pay" onclick="pagar('basico')">Pagar</button>
  </div>

  <div class="plan">
    ğŸ“— IntermediÃ¡rio â€“ R$99,90  
    <button class="pay" onclick="pagar('intermediario')">Pagar</button>
  </div>

  <div class="plan">
    ğŸ“• AvanÃ§ado â€“ R$149,90  
    <button class="pay" onclick="pagar('avancado')">Pagar</button>
  </div>
</div>

<!-- ÃREA DO ALUNO -->
<div class="box hidden" id="alunoBox">
  <h2>Ãrea do Aluno</h2>
  <p id="planoAtivo"></p>

  <div id="conteudo"></div>

  <button class="logout" onclick="logout()">Sair</button>
</div>

</div>

<script>
// ğŸ”¥ CONFIG FIREBASE (TROQUE)
firebase.initializeApp({
  apiKey: "SUA_API_KEY",
  authDomain: "SEU_PROJETO.firebaseapp.com",
  projectId: "SEU_PROJETO"
});

const auth = firebase.auth();
const db = firebase.firestore();
let usuarioAtual = null;

function registrar(){
  auth.createUserWithEmailAndPassword(email.value, senha.value)
  .then(user=>{
    db.collection("alunos").doc(user.user.uid).set({
      plano:"nenhum"
    });
  });
}

function login(){
  auth.signInWithEmailAndPassword(email.value, senha.value);
}

auth.onAuthStateChanged(user=>{
  if(user){
    usuarioAtual = user;
    loginBox.classList.add("hidden");

    db.collection("alunos").doc(user.uid).get()
    .then(doc=>{
      const plano = doc.data().plano;

      if(plano === "nenhum"){
        pagamentoBox.classList.remove("hidden");
      } else {
        mostrarConteudo(plano);
      }
    });
  }
});

function pagar(plano){
  alert(
    "Pagamento iniciado para o plano: " + plano +
    "\n\nAqui vocÃª conecta o Mercado Pago (Pix / CartÃ£o)."
  );

  // SIMULA pagamento aprovado
  db.collection("alunos").doc(usuarioAtual.uid).update({
    plano: plano
  }).then(()=>{
    mostrarConteudo(plano);
  });
}

function mostrarConteudo(plano){
  pagamentoBox.classList.add("hidden");
  alunoBox.classList.remove("hidden");
  planoAtivo.innerText = "Plano ativo: " + plano;

  conteudo.innerHTML = `
    <div class="plan">ğŸ“ ConteÃºdo liberado do plano ${plano}</div>
  `;
}

function logout(){
  auth.signOut();
  location.reload();
}
</script>

</body>
</html>
